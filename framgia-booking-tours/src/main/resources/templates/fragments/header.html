<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
    <!-- Header Fragment -->
    <header th:fragment="header" class="bg-white shadow-sm sticky top-0 z-40">
        <div class="flex items-center justify-between px-8 py-4">
            <!-- Breadcrumb -->
            <div class="flex items-center text-sm text-gray-600">
                <i class="fas fa-home mr-2"></i>
                <span class="mr-2">Trang chủ</span>
                <i class="fas fa-chevron-right text-xs mr-2"></i>
                <span class="text-blue-900 font-semibold" th:text="${pageTitle}">Tổng quan</span>
            </div>

            <!-- Right Side: Notifications & Profile -->
            <div class="flex items-center space-x-4">
                <!-- Notification Icon -->
                <div class="relative">
                    <button class="relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition">
                        <i class="fas fa-bell text-xl"></i>
                        <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                    </button>
                </div>

                <!-- Admin Profile -->
                <div class="flex items-center space-x-3 pl-4 border-l border-gray-200">
                    <!-- Avatar with dynamic name -->
                    <img th:if="${#authentication.principal.user.profile != null && #authentication.principal.user.profile.fullName != null}"
                         th:src="@{'https://ui-avatars.com/api/?name=' + ${#authentication.principal.user.profile.fullName} + '&background=1e40af&color=fff&bold=true'}"
                         th:alt="${#authentication.principal.user.profile.fullName}"
                         class="w-11 h-11 rounded-full border-2 border-blue-900 shadow-md">

                    <img th:unless="${#authentication.principal.user.profile != null && #authentication.principal.user.profile.fullName != null}"
                         th:src="@{'https://ui-avatars.com/api/?name=' + ${#authentication.principal.user.email} + '&background=1e40af&color=fff&bold=true'}"
                         th:alt="${#authentication.principal.user.email}"
                         class="w-11 h-11 rounded-full border-2 border-blue-900 shadow-md">

                    <!-- User Info -->
                    <div>
                        <p class="text-sm font-bold text-gray-900"
                           th:text="${#authentication.principal.user.profile != null ? #authentication.principal.user.profile.fullName : 'Admin'}">
                            Admin
                        </p>
                        <p class="text-xs text-gray-500"
                           th:text="${#authentication.principal.user.email}">
                            admin@example.com
                        </p>
                    </div>

                    <!-- Dropdown Menu -->
                    <div class="relative group">
                        <button class="p-2 hover:bg-gray-100 rounded-lg transition">
                            <i class="fas fa-chevron-down text-gray-600"></i>
                        </button>

                        <!-- Dropdown Content (Hidden by default) -->
                        <div class="absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="p-4 border-b border-gray-200">
                                <p class="text-sm font-bold text-gray-900"
                                   th:text="${#authentication.principal.user.profile != null ? #authentication.principal.user.profile.fullName : 'Admin'}">
                                    Admin
                                </p>
                                <p class="text-xs text-gray-500"
                                   th:text="${#authentication.principal.user.email}">
                                    admin@example.com
                                </p>
                            </div>

                            <div class="py-2">
                                <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition">
                                    <i class="fas fa-user-circle w-5 mr-3"></i>
                                    Hồ sơ cá nhân
                                </a>
                                <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition">
                                    <i class="fas fa-cog w-5 mr-3"></i>
                                    Cài đặt
                                </a>
                            </div>

                            <div class="border-t border-gray-200 py-2">
                                <a th:href="@{/logout}" class="flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition">
                                    <i class="fas fa-sign-out-alt w-5 mr-3"></i>
                                    Đăng xuất
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
</body>
</html>
